<!DOCTYPE html>
<html>
 
<head>
    <meta charset="utf-8" />
    <title>D3 EXPERIMENT</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      .headline {
        font-size: 60px;
        font-family: 'Times New Roman', Times, serif;
        color: steelblue;
        text-align: center;
      }

      .small {
        font-family: 'Times New Roman', Times, serif;
        color: steelblue;
        text-align: center;
      }
    </style>
  </head>
  
  <body>
    <h1 id="title">SVG SQUARES - ENTER/UPDATE/EXIT</h1>
    <p></p>
    <h2></h2>
    <svg id="rectCanvas" height="1000px" width="1000px"></svg> 

     <script>
       //headline
       d3.select("#title")
         .attr("class","headline")
       //add a paragraph 
       d3.select("p").text("Xiaoxi Ma, 2022/02/27")
         .attr("class","small");
      //add h2
      d3.select("h2")
        .text("Overall Best Countries Ranking - quality of life - not real data")
        .attr("class", "small");
        // Data
        var data2020 = [
            {
                country: "usa",
                value: 80
            },
            {
                country: "can",
                value: 30
            },
            {
                country: "dnk",
                value: 20
            }
        ];
        var data2018 = [
            {
                country: "usa",
                value: 90
            },
            {
                country: "dnk",
                value: 40
            }
        ];
        var data2016 = [
            {
                country: "usa",
                value: 100
            },
            {
                country: "can",
                value: 50
            },
            {
                country: "dnk",
                value: 30
            }
        ];

  
     

        function drawRect(dataArray) {
            
            var rect = d3.select("#rectCanvas")
            .selectAll("rect")
            .data(dataArray, function(currentDataPoint) {
                console.log(currentDataPoint.country);
                return currentDataPoint.country;
            });
            //update
            rect
                .transition()
                .duration(1000)
                .attr("x", function(d){
                    return d.value * 5;
                })
                .attr("height", function(d){
                    return d.value;
                })
                .attr("width", function(d){
                    return d.value;
                })
                .attr("fill", "black")
                ;
            //enter
            rect.enter().append("rect")
                .attr("class", "myRect")
                .attr("x", function(d){
                    return d.value * 10;
                })
                .attr("height", function(d){
                    return d.value;
                })
                .attr("width", function(d){
                    return d.value;
                })
                .attr("fill","blue")
                .transition()
                .duration(1000)
            //exit
            rect.exit()
            .transition().duration(1000)
            .attr("height", 0)
            .attr("fill","green")
            .remove();
        }
        drawRect(data2020);

    </script>
    </body>
</html>
